import axios, { AxiosError } from "axios";
import { QueryServiceBayDto } from "../entities/dto/query-service-bay.dto";
import { ServiceBayModel } from "../entities/model/service-bay-model";
import { axiosInstance } from "@/src/core/util/config";
import { PYTHON_GATEWAY_URL } from "@/src/core/util/constant";

let serviceBays: ServiceBayModel[] = [
  {
    id: "1",
    name: "Bay Alpha",
    bay_number: "A-01",
    service_center_id: "1",
    service_center: {
      id: "1",
      name: "ServisLah Express Gombak",
      email: "g@servislah.com",
      phone: "0378901234",
    },
    capacity: 2,
    equipment: [
      "Hydraulic Lift",
      "Diagnostic Scanner",
      "Air Compressor",
      "Tool Cabinet",
    ],
    specializations: ["General Maintenance", "Oil Change", "Brake Service"],
    current_vehicle: {
      id: "1",
      make: "Toyota",
      model: "Camry",
      license_plate: "ABC-1234",
      owner_name: "John Doe",
    },
    current_appointment_id: "1",
    status: "OCCUPIED",
    hourly_rate: 85.5,
    last_maintenance_date: "2024-01-15",
    next_maintenance_date: "2024-07-15",
    total_services_completed: 156,
    average_service_time: 90,
    created_at: "2024-01-01T08:00:00Z",
    updated_at: "2024-01-15T10:30:00Z",
  },
  {
    id: "2",
    name: "Bay Beta",
    bay_number: "B-02",
    service_center_id: "1",
    service_center: {
      id: "1",
      name: "ServisLah Express Gombak",
      email: "g@servislah.com",
      phone: "0378901234",
    },
    capacity: 1,
    equipment: [
      "Hydraulic Lift",
      "Wheel Alignment Machine",
      "Tire Changer",
      "Balancer",
    ],
    specializations: ["Tire Service", "Wheel Alignment", "Suspension"],
    current_vehicle: undefined,
    current_appointment_id: undefined,
    status: "AVAILABLE",
    hourly_rate: 75.0,
    last_maintenance_date: "2024-02-10",
    next_maintenance_date: "2024-08-10",
    total_services_completed: 89,
    average_service_time: 60,
    created_at: "2024-01-01T08:00:00Z",
    updated_at: "2024-02-10T14:20:00Z",
  },
  {
    id: "3",
    name: "Bay Gamma",
    bay_number: "C-03",
    service_center_id: "1",
    service_center: {
      id: "1",
      name: "ServisLah Express Gombak",
      email: "g@servislah.com",
      phone: "0378901234",
    },
    capacity: 2,
    equipment: [
      "Hydraulic Lift",
      "Engine Hoist",
      "Diagnostic Scanner",
      "Welding Equipment",
    ],
    specializations: ["Engine Repair", "Transmission", "Major Repairs"],
    current_vehicle: {
      id: "3",
      make: "Ford",
      model: "F-150",
      license_plate: "DEF-5678",
      owner_name: "Mike Johnson",
    },
    current_appointment_id: "3",
    status: "OCCUPIED",
    hourly_rate: 95.0,
    last_maintenance_date: "2024-01-20",
    next_maintenance_date: "2024-07-20",
    total_services_completed: 203,
    average_service_time: 120,
    created_at: "2024-01-01T08:00:00Z",
    updated_at: "2024-01-20T16:45:00Z",
  },
  {
    id: "4",
    name: "Bay Delta",
    bay_number: "D-04",
    service_center_id: "2",
    service_center: {
      id: "2",
      name: "ServisLah Premium KL",
      email: "kl@servislah.com",
      phone: "0321234567",
    },
    capacity: 1,
    equipment: ["Hydraulic Lift", "Paint Booth", "Spray Gun", "Drying Lamps"],
    specializations: ["Body Work", "Painting", "Collision Repair"],
    current_vehicle: undefined,
    current_appointment_id: undefined,
    status: "MAINTENANCE",
    hourly_rate: 110.0,
    last_maintenance_date: "2024-03-01",
    next_maintenance_date: "2024-09-01",
    total_services_completed: 67,
    average_service_time: 180,
    created_at: "2024-01-05T09:00:00Z",
    updated_at: "2024-03-01T11:30:00Z",
  },
  {
    id: "5",
    name: "Bay Echo",
    bay_number: "E-05",
    service_center_id: "2",
    service_center: {
      id: "2",
      name: "ServisLah Premium KL",
      email: "kl@servislah.com",
      phone: "0321234567",
    },
    capacity: 1,
    equipment: [
      "Hydraulic Lift",
      "AC Service Station",
      "Refrigerant Recovery",
      "Leak Detector",
    ],
    specializations: ["AC Service", "Electrical", "Electronics"],
    current_vehicle: {
      id: "4",
      make: "Tesla",
      model: "Model 3",
      license_plate: "GHI-4321",
      owner_name: "Sarah Wilson",
    },
    current_appointment_id: "4",
    status: "OCCUPIED",
    hourly_rate: 120.0,
    last_maintenance_date: "2024-02-15",
    next_maintenance_date: "2024-08-15",
    total_services_completed: 134,
    average_service_time: 75,
    created_at: "2024-01-05T09:00:00Z",
    updated_at: "2024-02-15T13:15:00Z",
  },
  {
    id: "6",
    name: "Bay Foxtrot",
    bay_number: "F-06",
    service_center_id: "2",
    service_center: {
      id: "2",
      name: "ServisLah Premium KL",
      email: "kl@servislah.com",
      phone: "0321234567",
    },
    capacity: 2,
    equipment: [
      "Hydraulic Lift",
      "Diagnostic Scanner",
      "Oscilloscope",
      "Multimeter",
    ],
    specializations: ["Diagnostics", "Electrical", "Computer Systems"],
    current_vehicle: undefined,
    current_appointment_id: undefined,
    status: "AVAILABLE",
    hourly_rate: 100.0,
    last_maintenance_date: "2024-01-30",
    next_maintenance_date: "2024-07-30",
    total_services_completed: 178,
    average_service_time: 85,
    created_at: "2024-01-05T09:00:00Z",
    updated_at: "2024-01-30T15:40:00Z",
  },
  {
    id: "7",
    name: "Bay Golf",
    bay_number: "G-07",
    service_center_id: "3",
    service_center: {
      id: "3",
      name: "ServisLah Express Johor",
      email: "johor@servislah.com",
      phone: "0751234567",
    },
    capacity: 1,
    equipment: [
      "Hydraulic Lift",
      "Brake Lathe",
      "Pressure Bleeder",
      "Rotor Resurfacer",
    ],
    specializations: ["Brake Service", "Suspension", "Safety Inspections"],
    current_vehicle: undefined,
    current_appointment_id: undefined,
    status: "OUT_OF_SERVICE",
    hourly_rate: 80.0,
    last_maintenance_date: "2024-02-20",
    next_maintenance_date: "2024-08-20",
    total_services_completed: 145,
    average_service_time: 70,
    created_at: "2024-01-10T10:00:00Z",
    updated_at: "2024-02-20T12:25:00Z",
  },
  {
    id: "8",
    name: "Bay Hotel",
    bay_number: "H-08",
    service_center_id: "3",
    service_center: {
      id: "3",
      name: "ServisLah Express Johor",
      email: "johor@servislah.com",
      phone: "0751234567",
    },
    capacity: 1,
    equipment: [
      "Hydraulic Lift",
      "Oil Drain",
      "Filter Wrench Set",
      "Fluid Dispensers",
    ],
    specializations: ["Oil Change", "Filter Replacement", "Fluid Services"],
    current_vehicle: {
      id: "8",
      make: "Chevrolet",
      model: "Malibu",
      license_plate: "STU-3691",
      owner_name: "Lisa Anderson",
    },
    current_appointment_id: "8",
    status: "OCCUPIED",
    hourly_rate: 65.0,
    last_maintenance_date: "2024-01-25",
    next_maintenance_date: "2024-07-25",
    total_services_completed: 267,
    average_service_time: 45,
    created_at: "2024-01-10T10:00:00Z",
    updated_at: "2024-01-25T09:10:00Z",
  },
];

export const getServiceBays = async (
  token: string,
  query: QueryServiceBayDto
): Promise<ServiceBayModel[]> => {

  try {
    const response = await axiosInstance({ token: token }).get(`/service-bays`, { params: query });

    return response.data.data.service_bays;
  } catch (error) {
    if (error instanceof AxiosError) {
      throw new Error(error.response?.data.message || "Failed to get service bays");
    }
    throw new Error("Failed to get service bays");
  }
}
